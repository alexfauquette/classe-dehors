{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar MarkdownUtil_1 = require(\"../../util/MarkdownUtil\");\n/**\n * Inserts insertionString before each line\n */\n\n\nfunction insertBeforeEachLine(selectedText, insertBefore) {\n  var lines = selectedText.split(/\\n/);\n  var insertionLength = 0;\n  var modifiedText = lines.map(function (item, index) {\n    if (typeof insertBefore === \"string\") {\n      insertionLength += insertBefore.length;\n      return insertBefore + item;\n    } else if (typeof insertBefore === \"function\") {\n      var insertionResult = insertBefore(item, index);\n      insertionLength += insertionResult.length;\n      return insertBefore(item, index) + item;\n    }\n\n    throw Error(\"insertion is expected to be either a string or a function\");\n  }).join(\"\\n\");\n  return {\n    modifiedText: modifiedText,\n    insertionLength: insertionLength\n  };\n}\n\nexports.insertBeforeEachLine = insertBeforeEachLine;\n\nexports.makeList = function (state0, api, insertBefore) {\n  // Adjust the selection to encompass the whole word if the caret is inside one\n  var newSelectionRange = MarkdownUtil_1.selectWord({\n    text: state0.text,\n    selection: state0.selection\n  });\n  var state1 = api.setSelectionRange(newSelectionRange);\n  var breaksBeforeCount = MarkdownUtil_1.getBreaksNeededForEmptyLineBefore(state1.text, state1.selection.start);\n  var breaksBefore = Array(breaksBeforeCount + 1).join(\"\\n\");\n  var breaksAfterCount = MarkdownUtil_1.getBreaksNeededForEmptyLineAfter(state1.text, state1.selection.end);\n  var breaksAfter = Array(breaksAfterCount + 1).join(\"\\n\");\n  var modifiedText = insertBeforeEachLine(state1.selectedText, insertBefore);\n  api.replaceSelection(\"\" + breaksBefore + modifiedText.modifiedText + breaksAfter); // Specifically when the text has only one line, we can exclude the \"- \", for example, from the selection\n\n  var oneLinerOffset = state1.selectedText.indexOf(\"\\n\") === -1 ? modifiedText.insertionLength : 0;\n  var selectionStart = state1.selection.start + breaksBeforeCount + oneLinerOffset;\n  var selectionEnd = selectionStart + modifiedText.modifiedText.length - oneLinerOffset; // Adjust the selection to not contain the **\n\n  api.setSelectionRange({\n    start: selectionStart,\n    end: selectionEnd\n  });\n};\n\nexports.unorderedListCommand = {\n  buttonProps: {\n    \"aria-label\": \"Add unordered list\"\n  },\n  execute: function execute(_a) {\n    var initialState = _a.initialState,\n        textApi = _a.textApi;\n    exports.makeList(initialState, textApi, \"- \");\n  }\n};\nexports.orderedListCommand = {\n  buttonProps: {\n    \"aria-label\": \"Add ordered list\"\n  },\n  execute: function execute(_a) {\n    var initialState = _a.initialState,\n        textApi = _a.textApi;\n    exports.makeList(initialState, textApi, function (item, index) {\n      return index + 1 + \". \";\n    });\n  }\n};\nexports.checkedListCommand = {\n  buttonProps: {\n    \"aria-label\": \"Add checked list\"\n  },\n  execute: function execute(_a) {\n    var initialState = _a.initialState,\n        textApi = _a.textApi;\n    exports.makeList(initialState, textApi, function (item, index) {\n      return \"- [ ] \";\n    });\n  }\n};","map":{"version":3,"sources":["/home/alexandre/dev/classe-dehors/frontend/node_modules/ra-input-markdown/node_modules/react-mde/lib/js/commands/default-commands/listCommands.js"],"names":["Object","defineProperty","exports","value","MarkdownUtil_1","require","insertBeforeEachLine","selectedText","insertBefore","lines","split","insertionLength","modifiedText","map","item","index","length","insertionResult","Error","join","makeList","state0","api","newSelectionRange","selectWord","text","selection","state1","setSelectionRange","breaksBeforeCount","getBreaksNeededForEmptyLineBefore","start","breaksBefore","Array","breaksAfterCount","getBreaksNeededForEmptyLineAfter","end","breaksAfter","replaceSelection","oneLinerOffset","indexOf","selectionStart","selectionEnd","unorderedListCommand","buttonProps","execute","_a","initialState","textApi","orderedListCommand","checkedListCommand"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MarkdownUtil_1 = require(\"../../util/MarkdownUtil\");\n/**\n * Inserts insertionString before each line\n */\nfunction insertBeforeEachLine(selectedText, insertBefore) {\n    var lines = selectedText.split(/\\n/);\n    var insertionLength = 0;\n    var modifiedText = lines\n        .map(function (item, index) {\n        if (typeof insertBefore === \"string\") {\n            insertionLength += insertBefore.length;\n            return insertBefore + item;\n        }\n        else if (typeof insertBefore === \"function\") {\n            var insertionResult = insertBefore(item, index);\n            insertionLength += insertionResult.length;\n            return insertBefore(item, index) + item;\n        }\n        throw Error(\"insertion is expected to be either a string or a function\");\n    })\n        .join(\"\\n\");\n    return { modifiedText: modifiedText, insertionLength: insertionLength };\n}\nexports.insertBeforeEachLine = insertBeforeEachLine;\nexports.makeList = function (state0, api, insertBefore) {\n    // Adjust the selection to encompass the whole word if the caret is inside one\n    var newSelectionRange = MarkdownUtil_1.selectWord({\n        text: state0.text,\n        selection: state0.selection\n    });\n    var state1 = api.setSelectionRange(newSelectionRange);\n    var breaksBeforeCount = MarkdownUtil_1.getBreaksNeededForEmptyLineBefore(state1.text, state1.selection.start);\n    var breaksBefore = Array(breaksBeforeCount + 1).join(\"\\n\");\n    var breaksAfterCount = MarkdownUtil_1.getBreaksNeededForEmptyLineAfter(state1.text, state1.selection.end);\n    var breaksAfter = Array(breaksAfterCount + 1).join(\"\\n\");\n    var modifiedText = insertBeforeEachLine(state1.selectedText, insertBefore);\n    api.replaceSelection(\"\" + breaksBefore + modifiedText.modifiedText + breaksAfter);\n    // Specifically when the text has only one line, we can exclude the \"- \", for example, from the selection\n    var oneLinerOffset = state1.selectedText.indexOf(\"\\n\") === -1 ? modifiedText.insertionLength : 0;\n    var selectionStart = state1.selection.start + breaksBeforeCount + oneLinerOffset;\n    var selectionEnd = selectionStart + modifiedText.modifiedText.length - oneLinerOffset;\n    // Adjust the selection to not contain the **\n    api.setSelectionRange({\n        start: selectionStart,\n        end: selectionEnd\n    });\n};\nexports.unorderedListCommand = {\n    buttonProps: { \"aria-label\": \"Add unordered list\" },\n    execute: function (_a) {\n        var initialState = _a.initialState, textApi = _a.textApi;\n        exports.makeList(initialState, textApi, \"- \");\n    }\n};\nexports.orderedListCommand = {\n    buttonProps: { \"aria-label\": \"Add ordered list\" },\n    execute: function (_a) {\n        var initialState = _a.initialState, textApi = _a.textApi;\n        exports.makeList(initialState, textApi, function (item, index) { return index + 1 + \". \"; });\n    }\n};\nexports.checkedListCommand = {\n    buttonProps: { \"aria-label\": \"Add checked list\" },\n    execute: function (_a) {\n        var initialState = _a.initialState, textApi = _a.textApi;\n        exports.makeList(initialState, textApi, function (item, index) { return \"- [ ] \"; });\n    }\n};\n"]},"metadata":{},"sourceType":"script"}