{"ast":null,"code":"import _objectWithoutProperties from\"/home/alexandre/dev/classe-dehors/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React from\"react\";import EducationNationalForm from\"./specializedForm/EducationNationalForm\";import AssociationForm from\"./specializedForm/AssociationForm\";import CollectiviteForm from\"./specializedForm/CollectiviteForm\";import LaboratoireDeRechercheForm from\"./specializedForm/LaboratoireDeRechercheForm\";import{profileType}from\"constants.js\";import{SimpleForm,Toolbar,RadioButtonGroupInput,FormDataConsumer}from\"react-admin\";import{ReferenceInput}from\"@semapps/semantic-data-provider\";var acceptedHasTypeIds=profileType.map(function(x){return x.id;});var FilteredInput=function FilteredInput(_ref){var choices=_ref.choices,props=_objectWithoutProperties(_ref,[\"choices\"]);return/*#__PURE__*/React.createElement(RadioButtonGroupInput// <SelectInput\n,Object.assign({},props,{choices:choices.filter(function(x){return acceptedHasTypeIds.includes(x.id);}),optionText:\"pair:label\"}));};export var PersonForm=function PersonForm(_ref2){var mode=_ref2.mode,rest=_objectWithoutProperties(_ref2,[\"mode\"]);return/*#__PURE__*/React.createElement(SimpleForm,Object.assign({},rest,{redirect:\"show\",toolbar:/*#__PURE__*/React.createElement(Toolbar,{alwaysEnableSaveButton:true})// Always enable save as there are problems with ReferenceQuickCreateInput\n}),/*#__PURE__*/React.createElement(ReferenceInput,{reference:\"Type\",source:\"pair:hasType\",filter:{a:\"pair:AgentType\"}},/*#__PURE__*/React.createElement(FilteredInput,null)),/*#__PURE__*/React.createElement(FormDataConsumer,{fullWidth:true},function(_ref3){var formData=_ref3.formData,rest=_objectWithoutProperties(_ref3,[\"formData\"]);if(formData[\"pair:hasType\"]===\"https://data.classe-dehors.org/types/education-nationale\"){return/*#__PURE__*/React.createElement(EducationNationalForm,rest);}if(formData[\"pair:hasType\"]===\"https://data.classe-dehors.org/types/association\"){return/*#__PURE__*/React.createElement(AssociationForm,null);}if(formData[\"pair:hasType\"]===\"https://data.classe-dehors.org/types/collectivite\"){return/*#__PURE__*/React.createElement(CollectiviteForm,null);}if(formData[\"pair:hasType\"]===\"https://data.classe-dehors.org/types/laboratoire-de-recherche\"){return/*#__PURE__*/React.createElement(LaboratoireDeRechercheForm,null);}return null;}));};export default PersonForm;","map":{"version":3,"sources":["/home/alexandre/dev/classe-dehors/frontend/src/resources/Person/PersonForm.js"],"names":["React","EducationNationalForm","AssociationForm","CollectiviteForm","LaboratoireDeRechercheForm","profileType","SimpleForm","Toolbar","RadioButtonGroupInput","FormDataConsumer","ReferenceInput","acceptedHasTypeIds","map","x","id","FilteredInput","choices","props","filter","includes","PersonForm","mode","rest","a","formData"],"mappings":"qLAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,qBAAP,KAAkC,yCAAlC,CACA,MAAOC,CAAAA,eAAP,KAA4B,mCAA5B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oCAA7B,CACA,MAAOC,CAAAA,0BAAP,KAAuC,8CAAvC,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OACEC,UADF,CAEEC,OAFF,CAGEC,qBAHF,CAIEC,gBAJF,KAKO,aALP,CAMA,OAASC,cAAT,KAA+B,iCAA/B,CAEA,GAAMC,CAAAA,kBAAkB,CAAGN,WAAW,CAACO,GAAZ,CAAgB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,EAAT,EAAhB,CAA3B,CACA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAA2B,IAAxBC,CAAAA,OAAwB,MAAxBA,OAAwB,CAAZC,KAAY,4CAC/C,mBACE,oBAAC,qBACC;AADF,kBAEMA,KAFN,EAGE,OAAO,CAAED,OAAO,CAACE,MAAR,CAAe,SAACL,CAAD,QAAOF,CAAAA,kBAAkB,CAACQ,QAAnB,CAA4BN,CAAC,CAACC,EAA9B,CAAP,EAAf,CAHX,CAIE,UAAU,CAAC,YAJb,GADF,CAQD,CATD,CAWA,MAAO,IAAMM,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,OAAuB,IAApBC,CAAAA,IAAoB,OAApBA,IAAoB,CAAXC,IAAW,0CAC/C,mBACE,oBAAC,UAAD,kBACMA,IADN,EAEE,QAAQ,CAAC,MAFX,CAGE,OAAO,cAAE,oBAAC,OAAD,EAAS,sBAAsB,KAA/B,EAAoC;AAH/C,gBAKE,oBAAC,cAAD,EACE,SAAS,CAAC,MADZ,CAEE,MAAM,CAAC,cAFT,CAGE,MAAM,CAAE,CACNC,CAAC,CAAE,gBADG,CAHV,eAOE,oBAAC,aAAD,MAPF,CALF,cAcE,oBAAC,gBAAD,EAAkB,SAAS,KAA3B,EACG,eAA2B,IAAxBC,CAAAA,QAAwB,OAAxBA,QAAwB,CAAXF,IAAW,8CAC1B,GACEE,QAAQ,CAAC,cAAD,CAAR,GACA,0DAFF,CAGE,CACA,mBAAO,oBAAC,qBAAD,CAA2BF,IAA3B,CAAP,CACD,CACD,GACEE,QAAQ,CAAC,cAAD,CAAR,GACA,kDAFF,CAGE,CACA,mBAAO,oBAAC,eAAD,MAAP,CACD,CACD,GACEA,QAAQ,CAAC,cAAD,CAAR,GACA,mDAFF,CAGE,CACA,mBAAO,oBAAC,gBAAD,MAAP,CACD,CACD,GACEA,QAAQ,CAAC,cAAD,CAAR,GACA,+DAFF,CAGE,CACA,mBAAO,oBAAC,0BAAD,MAAP,CACD,CACD,MAAO,KAAP,CACD,CA3BH,CAdF,CADF,CA8CD,CA/CM,CAiDP,cAAeJ,CAAAA,UAAf","sourcesContent":["import React from \"react\";\nimport EducationNationalForm from \"./specializedForm/EducationNationalForm\";\nimport AssociationForm from \"./specializedForm/AssociationForm\";\nimport CollectiviteForm from \"./specializedForm/CollectiviteForm\";\nimport LaboratoireDeRechercheForm from \"./specializedForm/LaboratoireDeRechercheForm\";\nimport { profileType } from \"constants.js\";\nimport {\n  SimpleForm,\n  Toolbar,\n  RadioButtonGroupInput,\n  FormDataConsumer,\n} from \"react-admin\";\nimport { ReferenceInput } from \"@semapps/semantic-data-provider\";\n\nconst acceptedHasTypeIds = profileType.map((x) => x.id);\nconst FilteredInput = ({ choices, ...props }) => {\n  return (\n    <RadioButtonGroupInput\n      // <SelectInput\n      {...props}\n      choices={choices.filter((x) => acceptedHasTypeIds.includes(x.id))}\n      optionText=\"pair:label\"\n    />\n  );\n};\n\nexport const PersonForm = ({ mode, ...rest }) => {\n  return (\n    <SimpleForm\n      {...rest}\n      redirect=\"show\"\n      toolbar={<Toolbar alwaysEnableSaveButton />} // Always enable save as there are problems with ReferenceQuickCreateInput\n    >\n      <ReferenceInput\n        reference=\"Type\"\n        source=\"pair:hasType\"\n        filter={{\n          a: \"pair:AgentType\",\n        }}\n      >\n        <FilteredInput />\n      </ReferenceInput>\n      <FormDataConsumer fullWidth>\n        {({ formData, ...rest }) => {\n          if (\n            formData[\"pair:hasType\"] ===\n            \"https://data.classe-dehors.org/types/education-nationale\"\n          ) {\n            return <EducationNationalForm {...rest} />;\n          }\n          if (\n            formData[\"pair:hasType\"] ===\n            \"https://data.classe-dehors.org/types/association\"\n          ) {\n            return <AssociationForm />;\n          }\n          if (\n            formData[\"pair:hasType\"] ===\n            \"https://data.classe-dehors.org/types/collectivite\"\n          ) {\n            return <CollectiviteForm />;\n          }\n          if (\n            formData[\"pair:hasType\"] ===\n            \"https://data.classe-dehors.org/types/laboratoire-de-recherche\"\n          ) {\n            return <LaboratoireDeRechercheForm />;\n          }\n          return null;\n        }}\n      </FormDataConsumer>\n    </SimpleForm>\n  );\n};\n\nexport default PersonForm;\n"]},"metadata":{},"sourceType":"module"}